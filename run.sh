#!/bin/bash

if [[ `screen -ls | grep -e dedoc -e backend` ]]; then
	screen -ls | grep -e dedoc -e backend | cut -d. -f1 | awk '{print $1}' | xargs kill;
fi

# ------------------------------------------------------------
# ------------------------------------------------------------
#
#  ██████   █████   ██████ ██   ██ ███████ ███    ██ ██████  
#  ██   ██ ██   ██ ██      ██  ██  ██      ████   ██ ██   ██ 
#  ██████  ███████ ██      █████   █████   ██ ██  ██ ██   ██ 
#  ██   ██ ██   ██ ██      ██  ██  ██      ██  ██ ██ ██   ██ 
#  ██████  ██   ██  ██████ ██   ██ ███████ ██   ████ ██████  
#                                      
# ------------------------------------------------------------
# ------------------------------------------------------------
#
# start spring backend 

cd backend
	screen -dmS spring-backend bash -c "mvn clean compile process-classes exec:java"
cd ..

# ------------------------------------------------------------
# ------------------------------------------------------------
#
#   ██████ ███    ███     ██     ██ ███████ ██████  
#  ██      ████  ████     ██     ██ ██      ██   ██ 
#  ██      ██ ████ ██     ██  █  ██ █████   ██████  
#  ██      ██  ██  ██     ██ ███ ██ ██      ██   ██ 
#   ██████ ██      ██      ███ ███  ███████ ██████  
#                                                                                                                               
# ------------------------------------------------------------
# ------------------------------------------------------------
#


# start dedoc-web (react app)
cd dedoc-web
	screen -dmS dedoc-react-web bash -c "npm install && npm run start"
cd ..


# ------------------------------------------------------------
# ------------------------------------------------------------
#
#   ██████ ███    ███     ███████ ██████  ██ ████████  ██████  ██████  
#  ██      ████  ████     ██      ██   ██ ██    ██    ██    ██ ██   ██ 
#  ██      ██ ████ ██     █████   ██   ██ ██    ██    ██    ██ ██████  
#  ██      ██  ██  ██     ██      ██   ██ ██    ██    ██    ██ ██   ██ 
#   ██████ ██      ██     ███████ ██████  ██    ██     ██████  ██   ██ 
#                                                                                                                                                  
# ------------------------------------------------------------
# ------------------------------------------------------------
#

# start dedoc-editor (language client)
cd dedoc-editor
	screen -dmS dedoc-monaco-editor bash -c "yarn && cd browser-app && yarn start"
cd ..
